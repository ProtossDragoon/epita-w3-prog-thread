# Threads 

EPITA - Week4 - Programming

![Workflow](https://github.com/ProtossDragoon/epita-w4-prog-threads/actions/workflows/master.yaml/badge.svg)

## Quickstart

`terminal`
```bash
$ git clone https://github.com/ProtossDragoon/epita-w4-prog-threads.git
$ cd epita-w4-prog-threads
```

### basics

Threading basics

```bash
$ cd basics
$ make
```

#### hello

```bash
$ ./hello 10
Hello from thread!
Hello from thread!
Hello from thread!
Hello from thread!
Hello from thread!
Hello from thread!
Hello from thread!
Hello from thread!
Hello from thread!
Hello from thread!
```

#### hello_id

```bash
$ ./hello_id 10
Hello from thread 6!
Hello from thread 4!
Hello from thread 0!
Hello from thread 9!
Hello from thread 1!
Hello from thread 3!
Hello from thread 5!
Hello from thread 2!
Hello from thread 8!
Hello from thread 7!
```

#### hello_parity

```bash
$ ./hello_parity 10
Hello from an even thread.
Hello from an odd thread.
Hello from an even thread.
Hello from an odd thread.
Hello from an even thread.
Hello from an even thread.
Hello from an odd thread.
Hello from an odd thread.
Hello from an even thread.
Hello from an odd thread.
```

### sums

Parallelizing a sum algorithm

```bash
$ cd sums
$ make
```

#### split

We can split the array into N chunks and create N threads. Each thread will then work out the sum of one chunk. Finally, we can add up all the sums generated by the threads to get the sum of the array.

```bash
$ ./split 100 1
Thread 00: 19000
Sum......: 19000
$ ./split 100 8
Thread 00: 2280
Thread 01: 2280
Thread 02: 2280
Thread 03: 2280
Thread 04: 2280
Thread 05: 2280
Thread 06: 2280
Thread 07: 3040
Sum......: 19000
```

```bash
$ time ./split 1000000000 1
Thread 00: 778240
Sum......: 778240
./split 1000000000 1  0.10s user 0.13s system 96% cpu 0.245 total
$ time ./split 1000000000 16
Thread 15: 0
Thread 00: 778240
Thread 11: 0
Thread 01: 0
Thread 02: 0
Thread 07: 0
Thread 09: 0
Thread 05: 0
Thread 03: 0
Thread 06: 0
Thread 04: 0
Thread 13: 0
Thread 10: 0
Thread 12: 0
Thread 14: 0
Thread 08: 0
Sum......: 778240
./split 1000000000 16  0.13s user 0.26s system 337% cpu 0.116 total
```

#### dnc

We can use a divide-and-conquer strategy

```bash
$ ./dnc 100 1
Sum................. 19000
Number of threads... 1
$ ./dnc 100 8
Sum................. 19000
Number of threads... 8
```

```bash
$ time ./dnc 1000000000 1
Sum................. 778240
Number of threads... 1
./dnc 1000000000 1  0.11s user 0.17s system 61% cpu 0.453 total
$ time ./dnc 1000000000 16
Sum................. 778240
Number of threads... 16
./dnc 1000000000 16  0.13s user 0.25s system 144% cpu 0.267 total
```

## Notes

If you are using VSCode, change your "type" in your launch.json file, e.g. `"type": "gdb"`
